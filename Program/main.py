 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #  
#                                                                                                                          #
#   _/\/\/\/\/\________/\/\______/\/\/\/\/\/\____/\/\/\/\/\__________/\/\/\/\/\____/\/\/\/\______/\/\/\/\____/\/\_______   #
#   _/\/\____/\/\____/\/\/\/\________/\/\______/\/\________________/\/\__________/\/\____/\/\__/\/\____/\/\__/\/\_______   #
#   _/\/\/\/\/\____/\/\____/\/\______/\/\________/\/\/\/\__________/\/\__________/\/\____/\/\__/\/\____/\/\__/\/\_______   #
#   _/\/\__________/\/\/\/\/\/\______/\/\______________/\/\__/\/\__/\/\__________/\/\____/\/\__/\/\____/\/\__/\/\_______   #
#   _/\/\__________/\/\____/\/\______/\/\______/\/\/\/\/\____/\/\____/\/\/\/\/\____/\/\/\/\______/\/\/\/\____/\/\/\/\/\_   #
#   ____________________________________________________________________________________________________________________   #
#   ___/\/\/\/\____/\/\____/\/\______/\/\______/\/\____/\/\__/\/\/\/\/\/\______/\/\/\/\/\______/\/\/\/\____/\/\/\/\/\/\_   #
#   _/\/\____/\/\__/\/\____/\/\____/\/\/\/\____/\/\/\__/\/\______/\/\__________/\/\____/\/\__/\/\____/\/\______/\/\_____   #
#   _/\/\____/\/\__/\/\____/\/\__/\/\____/\/\__/\/\/\/\/\/\______/\/\__________/\/\/\/\/\____/\/\____/\/\______/\/\_____   #
#   _/\/\__/\/\____/\/\____/\/\__/\/\/\/\/\/\__/\/\__/\/\/\______/\/\__________/\/\____/\/\__/\/\____/\/\______/\/\_____   #
#   ___/\/\/\/\/\____/\/\/\/\____/\/\____/\/\__/\/\____/\/\______/\/\__________/\/\/\/\/\______/\/\/\/\________/\/\_____   #
#                                                                                                                          #
#   WWW.PATS.COOL WWW.PATS.COOL WWW.PATS.COOL WWW.PATS.COOL WWW.PATS.COOL WWW.PATS.COOL WWW.PATS.COOL WWW.PATS.COOL WWW.   #
#   ____________________________________________________________________________________________________________________   #
#   _______________________________________________               ____ _ ____ ______ ___________________________________   #
#   ________________________&&&%%@&%&,,(*___________  BUIDLED BY |    \ /    |      | __________________________________   #
#   __________________#/&@@&&@@&%(@@&&&@&&(#____________________ |  o  |  o  |      | __________________________________   #
#   ___ S'GETIT _____/&@@@@@&&&@@&@&%@&@&(@#@%&_________________ |   _/|     |_|  |_| __________________________________   #
#   _______________%&&&&@&@@@@%@@&%#@@@@@&%&@(((________________ |  |  |  _  | |  | ____________________________________   #
#   ______________&&@@@@&@@@@@@&@&&@@&#@@@#&@#&@#_______________ |__|  |__|__| |__| ____________________________________   #
#   _____________/@@@&@@@@@@@@&#&&&%@&@@&%&#@&&/@(_______________  _____ ____ ____  ______ ____  ____  ____  ___ _______   #
#   _____________(&@&@@@@&%%///////(%/(&%%#&&@&##@@_____________  / ___/     |    \|      |    |/    |/    |/   \ ______   #
#   _____________*@@&&&&&/////***********/&%#&@%%@______________ (   \_|  o  |  _  |      ||  ||  o  |   __|     | _____   #
#   ______________@@@&@@(&///********,,,,**&%#(&@#_______________ \__  |     |  |  |_|  |_||  ||     |  |  |  O  | _____   #
#   _______________@@&&@(////@#*****,@@,,,,&%@@%@________________ /  \ |  _  |  |  | |  |  |  ||  _  |  |_ |     | _____   #
#   _______________@&&&&////*//*/*,*,**,..,(%#@#_________________ \    |  |  |  |  | |  |  |  ||  |  |     |     | _____   #
#   _________________**//(///&&&&&&%%%(,...////___________________ \___|__|__|__|__| |__| |____|__|__|___,_|\___/ ______   #
#   ____ WAGMI _______@@@@(////*,,,,(/,,,.@&@%(___________________  ←← THIS GUY ________________________________________   #
#   ______________________@@////*****,,,@@#________________________ ___________________________________________________   #
#   ______________________*@,@@(//*_________________________________ This bot statistically arbitrages pairs on dYdX ___   #
#   ___________________________//**,.________________________________ by analyzing candlestick data, when it finds a ___   #
#   __________________________(/***,.__________ LFG00000 _____________ highly profitable / probable trade it employs ___   #
#   ______________________*@&///****,,*&&______________________________ the Kelly criterion to determine how much of ___   #
#   __________________*@@@@@@@@@@&&&%%%%%%%%&___________________________ ur bankroll should be invested 4 top profit ___   #
#   ______________#@@@@@@@@@@@@@@&&&&&%%%%#####%%*______________________________________________________________________   #
#   ____________________________________________________________________________________________________________________   #
#                                                                                                                          #
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #  
                                                                                                                                                                                                                                                       
 # IMPORT REQUIRED PARTS # # # # # # # # # # # # # # # # # # # #                                                           
#                                                                                                                           
from func_connections import connect_dydx
from constants import ABORT_ALL_POSITIONS, FIND_COINTEGRATED
from func_private import abort_all_positions
from func_public import construct_market_prices                                                                                                                                                            
#                                                                                                                           
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #                                                            
                                                                                                                                                                                                                                                      
 # START THE APP # # # # # # # # # # # # # # # # # # # #                                                          
#                                                                                                                           
if __name__ == "__main__":
    # CONNECT TO CLIENT
    try:
        client = connect_dydx()
    except Exception as e:
        print(e)
        print("Error connecting to client", e)
        exit(1)                                                                                             
#                                                                                                                           
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #                                                            
                                                                                                                            
 # ABORT ALL POSITIONS # # # # # # # # # # # # # # # # # # # # #                                                         
#                                                                                                                           
if ABORT_ALL_POSITIONS :
    try:
        print("Closing all positions...")
        close_orders = abort_all_positions(client)
    except Exception as e:
        print(e)
        print("Error closing all positions...", e)
        exit(1)  
#                                                                                                                           
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
                                                                                                                             
 # ABORT ALL POSITIONS # # # # # # # # # # # # # # # # # # # # #                                                         
#                                                                                                                           
if FIND_COINTEGRATED:

    # CONSTRUCT MARKET PRICES
    try:
        print("Analyzing market prices, please allow 5 minuets...")
        df_market_prices = construct_market_prices(client)
    except Exception as e:
        print(e)
        print("Error constructing market prices: ", e)
        exit(1)  
#                                                                                                                           
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
